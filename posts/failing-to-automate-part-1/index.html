<!DOCTYPE html><html lang="en" data-mode="dark" ><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta name="theme-color" media="(prefers-color-scheme: light)" content="#f7f7f7"><meta name="theme-color" media="(prefers-color-scheme: dark)" content="#1b1b1e"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="black-translucent"><meta name="viewport" content="width=device-width, user-scalable=no initial-scale=1, shrink-to-fit=no, viewport-fit=cover" ><meta name="generator" content="Jekyll v4.3.4" /><meta property="og:title" content="Failing to automate - GitLab merge requests" /><meta property="og:locale" content="en" /><meta name="description" content="Hello friend, after a long time, I am back with a new blog post. This time, I am getting sidetracked again and am writing about something different. I am going to talk about Gitlab and how I automated the little annoyance of creating merge requests, and finally how I truly learned two of the most common jokes in our industry are deeply rooted in truth. First of all, Git is amazing. When I initially started learning about Git, it felt more like a chore I have to do. After I started using it, I realized how amazing it is. It is the closest thing to a time machine we developers get (redux coughs). I started using Gitlab in my company, and I am lovin’ it. It was a very smooth transition from Github to Gitlab. I am not going to talk about the differences between the two, but I will say that I am very happy with Gitlab. The problem I had was not GitLab specifically, far from it actually. Following the trunk based development model, I create a new branch for every new feature I am working on. And sometimes, I have to create a new branch for every small change I am making. So, I have a lot of branches. And I have to create merge requests all of time. Every time I want to push my changes to remote, I have to first change my branch to dev, pull from remote, change my branch to the branch I am working on, and merge to the dev branch, and finally push to remote. Then, I have to go to Gitlab, create a merge request, select the source and target branch, and assign the right person. Luckly, if you authenticate GitLab using SSH, it provides a link to directly create a merge request. But again, you have to select the target branch, and assign the right person manually. It is a mild amount of annoyance, but if you have to do that 5 times a day, it adds up. At some point a few weeks back, I finally broke. I missed a few steps here and there, and it was causing issues either during merge, or worse, in staging environments. I decided to automate the process. I wanted to write a script that does all the song and dance of merging locally and creating a merge request with the right assignee and to the right branch. I started looking at the link GitLab shot out onto my terminal to look for hints on how to do just that. The link, once url decoded, basically looks like this https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=notMain. What may directly catch you eye may be the merge_request[source_branch]=notMain. This is the branch you would currently want to merge. I went to the GitLab url, poped open DevTools and clicked Create Merge Request. I looked at the network tab, and Voila! I found the request that GitLab sends to create a merge request. It looks like this: 1 2 3 4 5 6 7 8 9 10 { &quot;merge_request&quot;: { &quot;source_branch&quot;: &quot;notMain&quot;, &quot;target_branch&quot;: &quot;dev&quot;, &quot;title&quot;: &quot;Merge notMain to dev&quot;, &quot;assignee_ids&quot;: [ 123456 ] } } Great Success! We now know what the data being sent to the server looks like, we can test the obvious hypothesis to make here: CAN WE SET THE target_branch AND assignee_ids TO WHATEVER WE WANT? The answer is unsurprisingly, yes. We can set both of them to whatever we want to the initial GET request and everything works as expected. In my excitement, I wrote a script that would create a merge request with the right assignee and to the right branch. 1 2 3 4 5 6 7 8 #!/bin/bash SOURCE_BRANCH=$(git rev-parse --abbrev-ref HEAD) TARGET_BRANCH=&quot;dev&quot; ASSIGNEE_ID=&quot;123456&quot; echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to:&quot; echo &quot;https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=&quot;$SOURCE_BRANCH&quot;&amp;merge_request[target_branch]=&quot;$TARGET_BRANCH&quot;&amp;merge_request[assignee_ids][]=&quot;$ASSIGNEE_ID I was hardcoding all the values, but atleast I was able to shave of that switching branches and assigning people manually. Hurrah! Little did I know, that was just the beginning of the rabbithole. The next thing I wanted to automate was the switch, pull, switch, merge. As long I my working tree was clean, I can switch to any branch I want, pull and return to the branch I came from with no fear of having a merge conflict or uncommitted changes. I modified the script so that would do just that. 1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash SOURCE_BRANCH=$(git rev-parse --abbrev-ref HEAD) TARGET_BRANCH=&quot;dev&quot; ASSIGNEE_ID=&quot;123456&quot; git checkout $TARGET_BRANCH git pull git checkout $SOURCE_BRANCH git merge $TARGET_BRANCH echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to:&quot; echo &quot;https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=&quot;$SOURCE_BRANCH&quot;&amp;merge_request[target_branch]=&quot;$TARGET_BRANCH&quot;&amp;merge_request[assignee_ids][]=&quot;$ASSIGNEE_ID It was working great, it got me wanting to create merge requests for the sake of it. Then after a bit I wanted more, not just because hardcoding there values was giving me nightmares from ghosts of engineers past, but because I needed to change the assignee for one MR and I had to find out manually what the assignee ID was. I know 🙈 so primitive. I wanted to automate that as well. I created a script that would fetch the assigneees and save it to a file, and also another file that will store the selected assignee. 1 2 3 4 5 #!/bin/bash GITLAB_API_TOKEN=&quot;1234567890&quot; curl -s https://gitlab.com/api/v4/projects/0xecho%2Fprivate_repo/members/all -H &quot;PRIVATE-TOKEN: $GITLAB_API_TOKEN&quot; | jq -r &#39;.[] | .name + &quot; &quot; + .id&#39; &gt; assigneees.txt 1 2 3 4 5 6 7 8 9 10 11 #!/bin/bash echo &quot;Enter the number of the assignee you want to select&quot; cat assigneees.txt | nl read -p &quot;Enter the number: &quot; assignee_number assignee_id=$(cat assigneees.txt | sed -n &quot;$assignee_number p&quot; | awk &#39;{print $2}&#39;) echo $assignee_id | tee assignee_id.txt | xargs -I {} echo &quot;Assignee ID set to {}&quot; So we can now select the assignee from a list of all the assigneees. I modified the script to read the assignee ID from the file, and the TARGET_BRANCH as an required argument. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #!/bin/bash SOURCE_BRANCH=$(git rev-parse --abbrev-ref HEAD) if [ -z &quot;$1&quot; ] then echo &quot;Please provide the target branch as an argument&quot; exit 1 fi TARGET_BRANCH=$1 ASSIGNEE_ID=$(cat assignee_id.txt) if [ -z &quot;$ASSIGNEE_ID&quot; ] then echo &quot;Please set the assignee&quot; exit 1 fi git checkout $TARGET_BRANCH git pull git checkout $SOURCE_BRANCH git merge $TARGET_BRANCH echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to git checkout $TARGET_BRANCH git pull git checkout $SOURCE_BRANCH git merge $TARGET_BRANCH echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to:&quot; echo &quot;https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=&quot;$SOURCE_BRANCH&quot;&amp;merge_request[target_branch]=&quot;$TARGET_BRANCH&quot;&amp;merge_request[assignee_ids][]=&quot;$ASSIGNEE_ID I was happy with how this little script turned out. But then I scrolled down on the GitLab docs page I was refering to. I saw this: You can use Git push options to perform certain actions for merge requests at the same time as pushing changes:. It the goes on to explain how I could have done git push -o merge_request.create -o merge_request.target=dev -o merge_request.assignee_id=123456 and it would have created the merge request for me. I was upset, I had spent so much time on this, and I could have done it in a fraction of the time. But then I realized, I had learned a quite few of things along the way, and I had created the switch, pull, switch, merge part that I still use. Programmers really do try to automate a task that can be done manually in 15 seconds, and then spend 15 hours trying to do it. Also, not reading the docs for 5 more seconds can save you from creating a “solution” with more flaws than a 5 year old’s drawing of a unicorn. I know this was more of a rambling than a post, but I wanted to share my experience with you guys. I hope you enjoyed reading this as much as I enjoyed writing it. I would love to hear your thoughts on this. Thank you for reading! 🙏 Until next week! 🤓 Goodbye friend! 👋" /><meta property="og:description" content="Hello friend, after a long time, I am back with a new blog post. This time, I am getting sidetracked again and am writing about something different. I am going to talk about Gitlab and how I automated the little annoyance of creating merge requests, and finally how I truly learned two of the most common jokes in our industry are deeply rooted in truth. First of all, Git is amazing. When I initially started learning about Git, it felt more like a chore I have to do. After I started using it, I realized how amazing it is. It is the closest thing to a time machine we developers get (redux coughs). I started using Gitlab in my company, and I am lovin’ it. It was a very smooth transition from Github to Gitlab. I am not going to talk about the differences between the two, but I will say that I am very happy with Gitlab. The problem I had was not GitLab specifically, far from it actually. Following the trunk based development model, I create a new branch for every new feature I am working on. And sometimes, I have to create a new branch for every small change I am making. So, I have a lot of branches. And I have to create merge requests all of time. Every time I want to push my changes to remote, I have to first change my branch to dev, pull from remote, change my branch to the branch I am working on, and merge to the dev branch, and finally push to remote. Then, I have to go to Gitlab, create a merge request, select the source and target branch, and assign the right person. Luckly, if you authenticate GitLab using SSH, it provides a link to directly create a merge request. But again, you have to select the target branch, and assign the right person manually. It is a mild amount of annoyance, but if you have to do that 5 times a day, it adds up. At some point a few weeks back, I finally broke. I missed a few steps here and there, and it was causing issues either during merge, or worse, in staging environments. I decided to automate the process. I wanted to write a script that does all the song and dance of merging locally and creating a merge request with the right assignee and to the right branch. I started looking at the link GitLab shot out onto my terminal to look for hints on how to do just that. The link, once url decoded, basically looks like this https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=notMain. What may directly catch you eye may be the merge_request[source_branch]=notMain. This is the branch you would currently want to merge. I went to the GitLab url, poped open DevTools and clicked Create Merge Request. I looked at the network tab, and Voila! I found the request that GitLab sends to create a merge request. It looks like this: 1 2 3 4 5 6 7 8 9 10 { &quot;merge_request&quot;: { &quot;source_branch&quot;: &quot;notMain&quot;, &quot;target_branch&quot;: &quot;dev&quot;, &quot;title&quot;: &quot;Merge notMain to dev&quot;, &quot;assignee_ids&quot;: [ 123456 ] } } Great Success! We now know what the data being sent to the server looks like, we can test the obvious hypothesis to make here: CAN WE SET THE target_branch AND assignee_ids TO WHATEVER WE WANT? The answer is unsurprisingly, yes. We can set both of them to whatever we want to the initial GET request and everything works as expected. In my excitement, I wrote a script that would create a merge request with the right assignee and to the right branch. 1 2 3 4 5 6 7 8 #!/bin/bash SOURCE_BRANCH=$(git rev-parse --abbrev-ref HEAD) TARGET_BRANCH=&quot;dev&quot; ASSIGNEE_ID=&quot;123456&quot; echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to:&quot; echo &quot;https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=&quot;$SOURCE_BRANCH&quot;&amp;merge_request[target_branch]=&quot;$TARGET_BRANCH&quot;&amp;merge_request[assignee_ids][]=&quot;$ASSIGNEE_ID I was hardcoding all the values, but atleast I was able to shave of that switching branches and assigning people manually. Hurrah! Little did I know, that was just the beginning of the rabbithole. The next thing I wanted to automate was the switch, pull, switch, merge. As long I my working tree was clean, I can switch to any branch I want, pull and return to the branch I came from with no fear of having a merge conflict or uncommitted changes. I modified the script so that would do just that. 1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash SOURCE_BRANCH=$(git rev-parse --abbrev-ref HEAD) TARGET_BRANCH=&quot;dev&quot; ASSIGNEE_ID=&quot;123456&quot; git checkout $TARGET_BRANCH git pull git checkout $SOURCE_BRANCH git merge $TARGET_BRANCH echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to:&quot; echo &quot;https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=&quot;$SOURCE_BRANCH&quot;&amp;merge_request[target_branch]=&quot;$TARGET_BRANCH&quot;&amp;merge_request[assignee_ids][]=&quot;$ASSIGNEE_ID It was working great, it got me wanting to create merge requests for the sake of it. Then after a bit I wanted more, not just because hardcoding there values was giving me nightmares from ghosts of engineers past, but because I needed to change the assignee for one MR and I had to find out manually what the assignee ID was. I know 🙈 so primitive. I wanted to automate that as well. I created a script that would fetch the assigneees and save it to a file, and also another file that will store the selected assignee. 1 2 3 4 5 #!/bin/bash GITLAB_API_TOKEN=&quot;1234567890&quot; curl -s https://gitlab.com/api/v4/projects/0xecho%2Fprivate_repo/members/all -H &quot;PRIVATE-TOKEN: $GITLAB_API_TOKEN&quot; | jq -r &#39;.[] | .name + &quot; &quot; + .id&#39; &gt; assigneees.txt 1 2 3 4 5 6 7 8 9 10 11 #!/bin/bash echo &quot;Enter the number of the assignee you want to select&quot; cat assigneees.txt | nl read -p &quot;Enter the number: &quot; assignee_number assignee_id=$(cat assigneees.txt | sed -n &quot;$assignee_number p&quot; | awk &#39;{print $2}&#39;) echo $assignee_id | tee assignee_id.txt | xargs -I {} echo &quot;Assignee ID set to {}&quot; So we can now select the assignee from a list of all the assigneees. I modified the script to read the assignee ID from the file, and the TARGET_BRANCH as an required argument. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #!/bin/bash SOURCE_BRANCH=$(git rev-parse --abbrev-ref HEAD) if [ -z &quot;$1&quot; ] then echo &quot;Please provide the target branch as an argument&quot; exit 1 fi TARGET_BRANCH=$1 ASSIGNEE_ID=$(cat assignee_id.txt) if [ -z &quot;$ASSIGNEE_ID&quot; ] then echo &quot;Please set the assignee&quot; exit 1 fi git checkout $TARGET_BRANCH git pull git checkout $SOURCE_BRANCH git merge $TARGET_BRANCH echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to git checkout $TARGET_BRANCH git pull git checkout $SOURCE_BRANCH git merge $TARGET_BRANCH echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to:&quot; echo &quot;https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=&quot;$SOURCE_BRANCH&quot;&amp;merge_request[target_branch]=&quot;$TARGET_BRANCH&quot;&amp;merge_request[assignee_ids][]=&quot;$ASSIGNEE_ID I was happy with how this little script turned out. But then I scrolled down on the GitLab docs page I was refering to. I saw this: You can use Git push options to perform certain actions for merge requests at the same time as pushing changes:. It the goes on to explain how I could have done git push -o merge_request.create -o merge_request.target=dev -o merge_request.assignee_id=123456 and it would have created the merge request for me. I was upset, I had spent so much time on this, and I could have done it in a fraction of the time. But then I realized, I had learned a quite few of things along the way, and I had created the switch, pull, switch, merge part that I still use. Programmers really do try to automate a task that can be done manually in 15 seconds, and then spend 15 hours trying to do it. Also, not reading the docs for 5 more seconds can save you from creating a “solution” with more flaws than a 5 year old’s drawing of a unicorn. I know this was more of a rambling than a post, but I wanted to share my experience with you guys. I hope you enjoyed reading this as much as I enjoyed writing it. I would love to hear your thoughts on this. Thank you for reading! 🙏 Until next week! 🤓 Goodbye friend! 👋" /><link rel="canonical" href="https://blog.echo.et/posts/failing-to-automate-part-1/" /><meta property="og:url" content="https://blog.echo.et/posts/failing-to-automate-part-1/" /><meta property="og:site_name" content="A Scuba Blog by 0xecho" /><meta property="og:image" content="https://blog.echo.et/assets/gitlab-logo-100.jpg" /><meta property="og:image:height" content="400" /><meta property="og:image:width" content="1000" /><meta property="og:image:alt" content="GitLab logo" /><meta property="og:type" content="article" /><meta property="article:published_time" content="2022-11-06T15:00:00+03:00" /><meta name="twitter:card" content="summary_large_image" /><meta property="twitter:image" content="https://blog.echo.et/assets/gitlab-logo-100.jpg" /><meta name="twitter:image:alt" content="GitLab logo" /><meta property="twitter:title" content="Failing to automate - GitLab merge requests" /><meta name="twitter:site" content="@0xecho" /><meta name="google-site-verification" content="MO4CCWjc_RhUutpASK6mHruJmg0TE99RP3lo1Nnh1mc" /> <script type="application/ld+json"> {"@context":"https://schema.org","@type":"BlogPosting","dateModified":"2022-11-06T19:25:08+03:00","datePublished":"2022-11-06T15:00:00+03:00","description":"Hello friend, after a long time, I am back with a new blog post. This time, I am getting sidetracked again and am writing about something different. I am going to talk about Gitlab and how I automated the little annoyance of creating merge requests, and finally how I truly learned two of the most common jokes in our industry are deeply rooted in truth. First of all, Git is amazing. When I initially started learning about Git, it felt more like a chore I have to do. After I started using it, I realized how amazing it is. It is the closest thing to a time machine we developers get (redux coughs). I started using Gitlab in my company, and I am lovin’ it. It was a very smooth transition from Github to Gitlab. I am not going to talk about the differences between the two, but I will say that I am very happy with Gitlab. The problem I had was not GitLab specifically, far from it actually. Following the trunk based development model, I create a new branch for every new feature I am working on. And sometimes, I have to create a new branch for every small change I am making. So, I have a lot of branches. And I have to create merge requests all of time. Every time I want to push my changes to remote, I have to first change my branch to dev, pull from remote, change my branch to the branch I am working on, and merge to the dev branch, and finally push to remote. Then, I have to go to Gitlab, create a merge request, select the source and target branch, and assign the right person. Luckly, if you authenticate GitLab using SSH, it provides a link to directly create a merge request. But again, you have to select the target branch, and assign the right person manually. It is a mild amount of annoyance, but if you have to do that 5 times a day, it adds up. At some point a few weeks back, I finally broke. I missed a few steps here and there, and it was causing issues either during merge, or worse, in staging environments. I decided to automate the process. I wanted to write a script that does all the song and dance of merging locally and creating a merge request with the right assignee and to the right branch. I started looking at the link GitLab shot out onto my terminal to look for hints on how to do just that. The link, once url decoded, basically looks like this https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=notMain. What may directly catch you eye may be the merge_request[source_branch]=notMain. This is the branch you would currently want to merge. I went to the GitLab url, poped open DevTools and clicked Create Merge Request. I looked at the network tab, and Voila! I found the request that GitLab sends to create a merge request. It looks like this: 1 2 3 4 5 6 7 8 9 10 { &quot;merge_request&quot;: { &quot;source_branch&quot;: &quot;notMain&quot;, &quot;target_branch&quot;: &quot;dev&quot;, &quot;title&quot;: &quot;Merge notMain to dev&quot;, &quot;assignee_ids&quot;: [ 123456 ] } } Great Success! We now know what the data being sent to the server looks like, we can test the obvious hypothesis to make here: CAN WE SET THE target_branch AND assignee_ids TO WHATEVER WE WANT? The answer is unsurprisingly, yes. We can set both of them to whatever we want to the initial GET request and everything works as expected. In my excitement, I wrote a script that would create a merge request with the right assignee and to the right branch. 1 2 3 4 5 6 7 8 #!/bin/bash SOURCE_BRANCH=$(git rev-parse --abbrev-ref HEAD) TARGET_BRANCH=&quot;dev&quot; ASSIGNEE_ID=&quot;123456&quot; echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to:&quot; echo &quot;https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=&quot;$SOURCE_BRANCH&quot;&amp;merge_request[target_branch]=&quot;$TARGET_BRANCH&quot;&amp;merge_request[assignee_ids][]=&quot;$ASSIGNEE_ID I was hardcoding all the values, but atleast I was able to shave of that switching branches and assigning people manually. Hurrah! Little did I know, that was just the beginning of the rabbithole. The next thing I wanted to automate was the switch, pull, switch, merge. As long I my working tree was clean, I can switch to any branch I want, pull and return to the branch I came from with no fear of having a merge conflict or uncommitted changes. I modified the script so that would do just that. 1 2 3 4 5 6 7 8 9 10 11 12 13 #!/bin/bash SOURCE_BRANCH=$(git rev-parse --abbrev-ref HEAD) TARGET_BRANCH=&quot;dev&quot; ASSIGNEE_ID=&quot;123456&quot; git checkout $TARGET_BRANCH git pull git checkout $SOURCE_BRANCH git merge $TARGET_BRANCH echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to:&quot; echo &quot;https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=&quot;$SOURCE_BRANCH&quot;&amp;merge_request[target_branch]=&quot;$TARGET_BRANCH&quot;&amp;merge_request[assignee_ids][]=&quot;$ASSIGNEE_ID It was working great, it got me wanting to create merge requests for the sake of it. Then after a bit I wanted more, not just because hardcoding there values was giving me nightmares from ghosts of engineers past, but because I needed to change the assignee for one MR and I had to find out manually what the assignee ID was. I know 🙈 so primitive. I wanted to automate that as well. I created a script that would fetch the assigneees and save it to a file, and also another file that will store the selected assignee. 1 2 3 4 5 #!/bin/bash GITLAB_API_TOKEN=&quot;1234567890&quot; curl -s https://gitlab.com/api/v4/projects/0xecho%2Fprivate_repo/members/all -H &quot;PRIVATE-TOKEN: $GITLAB_API_TOKEN&quot; | jq -r &#39;.[] | .name + &quot; &quot; + .id&#39; &gt; assigneees.txt 1 2 3 4 5 6 7 8 9 10 11 #!/bin/bash echo &quot;Enter the number of the assignee you want to select&quot; cat assigneees.txt | nl read -p &quot;Enter the number: &quot; assignee_number assignee_id=$(cat assigneees.txt | sed -n &quot;$assignee_number p&quot; | awk &#39;{print $2}&#39;) echo $assignee_id | tee assignee_id.txt | xargs -I {} echo &quot;Assignee ID set to {}&quot; So we can now select the assignee from a list of all the assigneees. I modified the script to read the assignee ID from the file, and the TARGET_BRANCH as an required argument. 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 #!/bin/bash SOURCE_BRANCH=$(git rev-parse --abbrev-ref HEAD) if [ -z &quot;$1&quot; ] then echo &quot;Please provide the target branch as an argument&quot; exit 1 fi TARGET_BRANCH=$1 ASSIGNEE_ID=$(cat assignee_id.txt) if [ -z &quot;$ASSIGNEE_ID&quot; ] then echo &quot;Please set the assignee&quot; exit 1 fi git checkout $TARGET_BRANCH git pull git checkout $SOURCE_BRANCH git merge $TARGET_BRANCH echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to git checkout $TARGET_BRANCH git pull git checkout $SOURCE_BRANCH git merge $TARGET_BRANCH echo &quot;To create a merge request from $SOURCE_BRANCH to $TARGET_BRANCH, go to:&quot; echo &quot;https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=&quot;$SOURCE_BRANCH&quot;&amp;merge_request[target_branch]=&quot;$TARGET_BRANCH&quot;&amp;merge_request[assignee_ids][]=&quot;$ASSIGNEE_ID I was happy with how this little script turned out. But then I scrolled down on the GitLab docs page I was refering to. I saw this: You can use Git push options to perform certain actions for merge requests at the same time as pushing changes:. It the goes on to explain how I could have done git push -o merge_request.create -o merge_request.target=dev -o merge_request.assignee_id=123456 and it would have created the merge request for me. I was upset, I had spent so much time on this, and I could have done it in a fraction of the time. But then I realized, I had learned a quite few of things along the way, and I had created the switch, pull, switch, merge part that I still use. Programmers really do try to automate a task that can be done manually in 15 seconds, and then spend 15 hours trying to do it. Also, not reading the docs for 5 more seconds can save you from creating a “solution” with more flaws than a 5 year old’s drawing of a unicorn. I know this was more of a rambling than a post, but I wanted to share my experience with you guys. I hope you enjoyed reading this as much as I enjoyed writing it. I would love to hear your thoughts on this. Thank you for reading! 🙏 Until next week! 🤓 Goodbye friend! 👋","headline":"Failing to automate - GitLab merge requests","image":{"width":1000,"height":400,"alt":"GitLab logo","url":"https://blog.echo.et/assets/gitlab-logo-100.jpg","@type":"imageObject"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://blog.echo.et/posts/failing-to-automate-part-1/"},"url":"https://blog.echo.et/posts/failing-to-automate-part-1/"}</script><title>Failing to automate - GitLab merge requests | A Scuba Blog by 0xecho</title><link rel="apple-touch-icon" sizes="180x180" href="/assets/img/favicons/apple-touch-icon.png"><link rel="icon" type="image/png" sizes="32x32" href="/assets/img/favicons/favicon-32x32.png"><link rel="icon" type="image/png" sizes="16x16" href="/assets/img/favicons/favicon-16x16.png"><link rel="manifest" href="/assets/img/favicons/site.webmanifest"><link rel="shortcut icon" href="/assets/img/favicons/favicon.ico"><meta name="apple-mobile-web-app-title" content="A Scuba Blog by 0xecho"><meta name="application-name" content="A Scuba Blog by 0xecho"><meta name="msapplication-TileColor" content="#da532c"><meta name="msapplication-config" content="/assets/img/favicons/browserconfig.xml"><meta name="theme-color" content="#ffffff"><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://fonts.gstatic.com" crossorigin><link rel="dns-prefetch" href="https://fonts.gstatic.com" crossorigin><link rel="preconnect" href="https://fonts.googleapis.com" ><link rel="dns-prefetch" href="https://fonts.googleapis.com" ><link rel="preconnect" href="https://cdn.jsdelivr.net" ><link rel="dns-prefetch" href="https://cdn.jsdelivr.net" ><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lato&family=Source+Sans+Pro:wght@400;600;700;900&display=swap"><link rel="preconnect" href="https://www.google-analytics.com" crossorigin="use-credentials"><link rel="dns-prefetch" href="https://www.google-analytics.com"><link rel="preconnect" href="https://www.googletagmanager.com" crossorigin="anonymous"><link rel="dns-prefetch" href="https://www.googletagmanager.com"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/css/bootstrap.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.11.2/css/all.min.css"><link rel="stylesheet" href="/assets/css/style.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/tocbot@4.20.1/dist/tocbot.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/magnific-popup@1/dist/magnific-popup.min.css"> <script src="https://cdn.jsdelivr.net/npm/jquery@3/dist/jquery.min.js"></script><body data-topbar-visible="true"><div id="sidebar" class="d-flex flex-column align-items-end"><div class="profile-wrapper text-center"><div id="avatar"> <a href="/" class="mx-auto"> <img src="https://avatars.githubusercontent.com/u/45893263?v=4" alt="avatar" onerror="this.style.display='none'"> </a></div><div class="site-title"> <a href="/">A Scuba Blog by 0xecho</a></div><div class="site-subtitle font-italic">A collection of (seeminglly) random thoughts, ideas, experiences, and what not...</div></div><ul class="w-100"><li class="nav-item"> <a href="/" class="nav-link"> <i class="fa-fw fas fa-home ml-xl-3 mr-xl-3 unloaded"></i> <span>HOME</span> </a><li class="nav-item"> <a href="/categories/" class="nav-link"> <i class="fa-fw fas fa-stream ml-xl-3 mr-xl-3 unloaded"></i> <span>CATEGORIES</span> </a><li class="nav-item"> <a href="/tags/" class="nav-link"> <i class="fa-fw fas fa-tag ml-xl-3 mr-xl-3 unloaded"></i> <span>TAGS</span> </a><li class="nav-item"> <a href="/archives/" class="nav-link"> <i class="fa-fw fas fa-archive ml-xl-3 mr-xl-3 unloaded"></i> <span>ARCHIVES</span> </a><li class="nav-item"> <a href="/0xecho/" class="nav-link"> <i class="fa-fw fa fa-th ml-xl-3 mr-xl-3 unloaded"></i> <span>PORTFOLIO TYPE I</span> </a></ul><div class="sidebar-bottom mt-auto d-flex flex-wrap justify-content-center align-items-center"> <a href="https://github.com/0xecho" aria-label="github" target="_blank" rel="noopener noreferrer"> <i class="fab fa-github"></i> </a> <a href="https://twitter.com/0xecho" aria-label="twitter" target="_blank" rel="noopener noreferrer"> <i class="fab fa-twitter"></i> </a> <a href="javascript:location.href = 'mailto:' + ['elias.amhat','gmail.com'].join('@')" aria-label="email" > <i class="fas fa-envelope"></i> </a> <a href="/feed.xml" aria-label="rss" > <i class="fas fa-rss"></i> </a> <a href="https://linkedin.com/in/elijahma" aria-label="linkedin" target="_blank" rel="noopener noreferrer"> <i class="fab fa-linkedin"></i> </a></div></div><div id="topbar-wrapper"><div id="topbar" class="container d-flex align-items-center justify-content-between h-100 pl-3 pr-3 pl-md-4 pr-md-4"> <span id="breadcrumb"> <span> <a href="/"> Home </a> </span> <span>Failing to automate - GitLab merge requests</span> </span> <i id="sidebar-trigger" class="fas fa-bars fa-fw"></i><div id="topbar-title"> Post</div><i id="search-trigger" class="fas fa-search fa-fw"></i> <span id="search-wrapper" class="align-items-center"> <i class="fas fa-search fa-fw"></i> <input class="form-control" id="search-input" type="search" aria-label="search" autocomplete="off" placeholder="Search..."> </span> <span id="search-cancel" >Cancel</span></div></div><div id="main-wrapper" class="d-flex justify-content-center"><div id="main" class="container pl-xl-4 pr-xl-4"><div class="row"><div id="core-wrapper" class="col-12 col-lg-11 col-xl-9 pr-xl-4"><div class="post pl-1 pr-1 pl-md-2 pr-md-2"><h1 data-toc-skip>Failing to automate - GitLab merge requests</h1><div class="post-meta text-muted"> <span> Posted <em class="" data-ts="1667736000" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Nov 6, 2022 </em> </span> <span> Updated <em class="" data-ts="1667751908" data-df="ll" data-toggle="tooltip" data-placement="bottom"> Nov 6, 2022 </em> </span><div class="mt-3 mb-3"> <a href="/assets/gitlab-logo-100.jpg" class="popup img-link preview-img shimmer"><img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 630'%3E%3C/svg%3E" data-src="/assets/gitlab-logo-100.jpg" alt="GitLab logo" width="1200" height="630" class="lazyload" data-proofer-ignore></a><figcaption class="text-center pt-2 pb-2">GitLab logo</figcaption></div><div class="d-flex justify-content-between"> <span> By <em> <a href="https://linkedin.com/in/elijahma">Elias Amha</a> </em> </span><div> <span class="readtime" data-toggle="tooltip" data-placement="bottom" title="1350 words"> <em>7 min</em> read</span></div></div></div><div class="post-content"><p>Hello friend, after a long time, I am back with a new blog post. This time, I am getting sidetracked again and am writing about something different. I am going to talk about Gitlab and how I automated the little annoyance of creating merge requests, and finally how I truly learned two of the most common jokes in our industry are deeply rooted in truth.</p><p>First of all, Git is amazing. When I initially started learning about Git, it felt more like a chore I have to do. After I started using it, I realized how amazing it is. It is the closest thing to a time machine we developers get (<em>redux coughs</em>). I started using Gitlab in my company, and I am lovin’ it. It was a very smooth transition from Github to Gitlab. I am not going to talk about the differences between the two, but I will say that I am very happy with Gitlab.</p><p>The problem I had was not GitLab specifically, far from it actually. Following the trunk based development model, I create a new branch for every new feature I am working on. And sometimes, I have to create a new branch for every small change I am making. So, I have a lot of branches. And I have to create merge requests all of time. Every time I want to push my changes to remote, I have to first change my branch to <code class="language-plaintext highlighter-rouge">dev</code>, pull from remote, change my branch to the branch I am working on, and merge to the <code class="language-plaintext highlighter-rouge">dev</code> branch, and finally push to remote. Then, I have to go to Gitlab, create a merge request, select the source and target branch, and assign the right person. Luckly, if you authenticate GitLab using SSH, it provides a link to directly create a merge request. But again, you have to select the target branch, and assign the right person manually. It is a mild amount of annoyance, but if you have to do that 5 times a day, it adds up.</p><p>At some point a few weeks back, I finally broke. I missed a few steps here and there, and it was causing issues either during merge, or worse, in staging environments. I decided to automate the process. I wanted to write a script that does all the song and dance of merging locally and creating a merge request with the right assignee and to the right branch.</p><p>I started looking at the link GitLab shot out onto my terminal to look for hints on how to do just that. The link, once url decoded, basically looks like this <code class="language-plaintext highlighter-rouge">https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]=notMain</code>. What may directly catch you eye may be the <code class="language-plaintext highlighter-rouge">merge_request[source_branch]=notMain</code>. This is the branch you would currently want to merge. I went to the GitLab url, poped open DevTools and clicked Create Merge Request. I looked at the network tab, and Voila! I found the request that GitLab sends to create a merge request. It looks like this:</p><div class="language-json highlighter-rouge"><div class="code-header"> <span data-label-text="JSON"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
</pre><td class="rouge-code"><pre><span class="p">{</span><span class="w">
    </span><span class="nl">"merge_request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"source_branch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"notMain"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"target_branch"</span><span class="p">:</span><span class="w"> </span><span class="s2">"dev"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"title"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Merge notMain to dev"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"assignee_ids"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
            </span><span class="mi">123456</span><span class="w">
        </span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></pre></table></code></div></div><p>Great Success! We now know what the data being sent to the server looks like, we can test the obvious hypothesis to make here: CAN WE SET THE <code class="language-plaintext highlighter-rouge">target_branch</code> AND <code class="language-plaintext highlighter-rouge">assignee_ids</code> TO WHATEVER WE WANT? The answer is unsurprisingly, yes. We can set both of them to whatever we want to the initial GET request and everything works as expected. In my excitement, I wrote a script that would create a merge request with the right assignee and to the right branch.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">SOURCE_BRANCH</span><span class="o">=</span><span class="si">$(</span>git rev-parse <span class="nt">--abbrev-ref</span> HEAD<span class="si">)</span>
<span class="nv">TARGET_BRANCH</span><span class="o">=</span><span class="s2">"dev"</span>
<span class="nv">ASSIGNEE_ID</span><span class="o">=</span><span class="s2">"123456"</span>

<span class="nb">echo</span> <span class="s2">"To create a merge request from </span><span class="nv">$SOURCE_BRANCH</span><span class="s2"> to </span><span class="nv">$TARGET_BRANCH</span><span class="s2">, go to:"</span>
<span class="nb">echo</span> <span class="s2">"https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]="</span><span class="nv">$SOURCE_BRANCH</span><span class="s2">"&amp;merge_request[target_branch]="</span><span class="nv">$TARGET_BRANCH</span><span class="s2">"&amp;merge_request[assignee_ids][]="</span><span class="nv">$ASSIGNEE_ID</span>
</pre></table></code></div></div><p>I was hardcoding all the values, but atleast I was able to shave of that switching branches and assigning people manually. Hurrah! Little did I know, that was just the beginning of the rabbithole.</p><p>The next thing I wanted to automate was the switch, pull, switch, merge. As long I my working tree was clean, I can switch to any branch I want, pull and return to the branch I came from with no fear of having a merge conflict or uncommitted changes. I modified the script so that would do just that.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">SOURCE_BRANCH</span><span class="o">=</span><span class="si">$(</span>git rev-parse <span class="nt">--abbrev-ref</span> HEAD<span class="si">)</span>
<span class="nv">TARGET_BRANCH</span><span class="o">=</span><span class="s2">"dev"</span>
<span class="nv">ASSIGNEE_ID</span><span class="o">=</span><span class="s2">"123456"</span>

git checkout <span class="nv">$TARGET_BRANCH</span>
git pull
git checkout <span class="nv">$SOURCE_BRANCH</span>
git merge <span class="nv">$TARGET_BRANCH</span>

<span class="nb">echo</span> <span class="s2">"To create a merge request from </span><span class="nv">$SOURCE_BRANCH</span><span class="s2"> to </span><span class="nv">$TARGET_BRANCH</span><span class="s2">, go to:"</span>
<span class="nb">echo</span> <span class="s2">"https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]="</span><span class="nv">$SOURCE_BRANCH</span><span class="s2">"&amp;merge_request[target_branch]="</span><span class="nv">$TARGET_BRANCH</span><span class="s2">"&amp;merge_request[assignee_ids][]="</span><span class="nv">$ASSIGNEE_ID</span>
</pre></table></code></div></div><p>It was working great, it got me wanting to create merge requests for the sake of it. Then after a bit I wanted more, not just because hardcoding there values was giving me nightmares from ghosts of engineers past, but because I needed to change the assignee for one MR and I had to find out manually what the assignee ID was. I know 🙈 so primitive. I wanted to automate that as well. I created a script that would fetch the assigneees and save it to a file, and also another file that will store the selected assignee.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">GITLAB_API_TOKEN</span><span class="o">=</span><span class="s2">"1234567890"</span>

curl <span class="nt">-s</span> https://gitlab.com/api/v4/projects/0xecho%2Fprivate_repo/members/all <span class="nt">-H</span> <span class="s2">"PRIVATE-TOKEN: </span><span class="nv">$GITLAB_API_TOKEN</span><span class="s2">"</span> | jq <span class="nt">-r</span> <span class="s1">'.[] | .name + " " + .id'</span> <span class="o">&gt;</span> assigneees.txt
</pre></table></code></div></div><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nb">echo</span> <span class="s2">"Enter the number of the assignee you want to select"</span>
<span class="nb">cat </span>assigneees.txt | <span class="nb">nl 

read</span> <span class="nt">-p</span> <span class="s2">"Enter the number: "</span> assignee_number

<span class="nv">assignee_id</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat </span>assigneees.txt | <span class="nb">sed</span> <span class="nt">-n</span> <span class="s2">"</span><span class="nv">$assignee_number</span><span class="s2"> p"</span> | <span class="nb">awk</span> <span class="s1">'{print $2}'</span><span class="si">)</span>

<span class="nb">echo</span> <span class="nv">$assignee_id</span> | <span class="nb">tee </span>assignee_id.txt | xargs <span class="nt">-I</span> <span class="o">{}</span> <span class="nb">echo</span> <span class="s2">"Assignee ID set to {}"</span>

</pre></table></code></div></div><p>So we can now select the assignee from a list of all the assigneees. I modified the script to read the assignee ID from the file, and the TARGET_BRANCH as an required argument.</p><div class="language-bash highlighter-rouge"><div class="code-header"> <span data-label-text="Shell"><i class="fas fa-code small"></i></span> <button aria-label="copy" data-title-succeed="Copied!"><i class="far fa-clipboard"></i></button></div><div class="highlight"><code><table class="rouge-table"><tbody><tr><td class="rouge-gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
</pre><td class="rouge-code"><pre><span class="c">#!/bin/bash</span>

<span class="nv">SOURCE_BRANCH</span><span class="o">=</span><span class="si">$(</span>git rev-parse <span class="nt">--abbrev-ref</span> HEAD<span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$1</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Please provide the target branch as an argument"</span>
    <span class="nb">exit </span>1
<span class="k">fi

</span><span class="nv">TARGET_BRANCH</span><span class="o">=</span><span class="nv">$1</span>

<span class="nv">ASSIGNEE_ID</span><span class="o">=</span><span class="si">$(</span><span class="nb">cat </span>assignee_id.txt<span class="si">)</span>

<span class="k">if</span> <span class="o">[</span> <span class="nt">-z</span> <span class="s2">"</span><span class="nv">$ASSIGNEE_ID</span><span class="s2">"</span> <span class="o">]</span>
<span class="k">then
    </span><span class="nb">echo</span> <span class="s2">"Please set the assignee"</span>
    <span class="nb">exit </span>1
<span class="k">fi

</span>git checkout <span class="nv">$TARGET_BRANCH</span>
git pull
git checkout <span class="nv">$SOURCE_BRANCH</span>
git merge <span class="nv">$TARGET_BRANCH</span>

<span class="nb">echo</span> <span class="s2">"To create a merge request from </span><span class="nv">$SOURCE_BRANCH</span><span class="s2"> to </span><span class="nv">$TARGET_BRANCH</span><span class="s2">, go to

git checkout </span><span class="nv">$TARGET_BRANCH</span><span class="s2">
git pull
git checkout </span><span class="nv">$SOURCE_BRANCH</span><span class="s2">
git merge </span><span class="nv">$TARGET_BRANCH</span><span class="s2">

echo "</span>To create a merge request from <span class="nv">$SOURCE_BRANCH</span> to <span class="nv">$TARGET_BRANCH</span>, go to:<span class="s2">"
echo "</span>https://gitlab.com/0xecho/private_repo/merge_requests/new?merge_request[source_branch]<span class="o">=</span><span class="s2">"</span><span class="nv">$SOURCE_BRANCH</span><span class="s2">"</span>&amp;merge_request[target_branch]<span class="o">=</span><span class="s2">"</span><span class="nv">$TARGET_BRANCH</span><span class="s2">"</span>&amp;merge_request[assignee_ids][]<span class="o">=</span><span class="s2">"</span><span class="nv">$ASSIGNEE_ID</span><span class="s2">
</span></pre></table></code></div></div><p>I was happy with how this little script turned out. But then I scrolled down on the GitLab docs page I was refering to. I saw this: <code class="language-plaintext highlighter-rouge">You can use Git push options to perform certain actions for merge requests at the same time as pushing changes:</code>. It the goes on to explain how I could have done <code class="language-plaintext highlighter-rouge">git push -o merge_request.create -o merge_request.target=dev -o merge_request.assignee_id=123456</code> and it would have created the merge request for me. I was upset, I had spent so much time on this, and I could have done it in a fraction of the time. But then I realized, I had learned a quite few of things along the way, and I had created the switch, pull, switch, merge part that I still use.</p><p>Programmers really do try to automate a task that can be done manually in 15 seconds, and then spend 15 hours trying to do it. Also, not reading the docs for 5 more seconds can save you from creating a “solution” with more flaws than a 5 year old’s drawing of a unicorn.</p><p>I know this was more of a rambling than a post, but I wanted to share my experience with you guys. I hope you enjoyed reading this as much as I enjoyed writing it. I would love to hear your thoughts on this.</p><p>Thank you for reading! 🙏 Until next week! 🤓 Goodbye friend! 👋</p></div><div class="post-tail-wrapper text-muted"><div class="post-meta mb-3"> <i class="far fa-folder-open fa-fw mr-1"></i> <a href='//categories/automation/'>Automation</a></div><div class="post-tags"> <i class="fa fa-tags fa-fw mr-1"></i> <a href="//tags/gitlab/" class="post-tag no-text-decoration" >gitlab</a> <a href="//tags/automation/" class="post-tag no-text-decoration" >automation</a> <a href="//tags/bash/" class="post-tag no-text-decoration" >bash</a> <a href="//tags/git/" class="post-tag no-text-decoration" >git</a></div><div class="post-tail-bottom d-flex justify-content-between align-items-center mt-3 pt-5 pb-2"><div class="license-wrapper"> This post is licensed under <a href="https://creativecommons.org/licenses/by/4.0/"> CC BY 4.0 </a> by the author.</div><div class="share-wrapper"> <span class="share-label text-muted mr-1">Share</span> <span class="share-icons"> <a href="https://twitter.com/intent/tweet?text=Failing%20to%20automate%20-%20GitLab%20merge%20requests%20-%20A%20Scuba%20Blog%20by%200xecho&url=https%3A%2F%2Fblog.echo.et%2Fposts%2Ffailing-to-automate-part-1%2F" data-toggle="tooltip" data-placement="top" title="Twitter" target="_blank" rel="noopener" aria-label="Twitter"> <i class="fa-fw fab fa-twitter"></i> </a> <a href="https://www.facebook.com/sharer/sharer.php?title=Failing%20to%20automate%20-%20GitLab%20merge%20requests%20-%20A%20Scuba%20Blog%20by%200xecho&u=https%3A%2F%2Fblog.echo.et%2Fposts%2Ffailing-to-automate-part-1%2F" data-toggle="tooltip" data-placement="top" title="Facebook" target="_blank" rel="noopener" aria-label="Facebook"> <i class="fa-fw fab fa-facebook-square"></i> </a> <a href="https://t.me/share/url?url=https%3A%2F%2Fblog.echo.et%2Fposts%2Ffailing-to-automate-part-1%2F&text=Failing%20to%20automate%20-%20GitLab%20merge%20requests%20-%20A%20Scuba%20Blog%20by%200xecho" data-toggle="tooltip" data-placement="top" title="Telegram" target="_blank" rel="noopener" aria-label="Telegram"> <i class="fa-fw fab fa-telegram"></i> </a> <i id="copy-link" class="fa-fw fas fa-link small" data-toggle="tooltip" data-placement="top" title="Copy link" data-title-succeed="Link copied successfully!"> </i> </span></div></div></div></div></div><div id="panel-wrapper" class="col-xl-3 pl-2 text-muted"><div class="access"><div id="access-lastmod" class="post"><div class="panel-heading">Recently Updated</div><ul class="post-content pl-0 pb-1 ml-1 mt-2"><li><a href="/posts/failing-to-automate-part-1/">Failing to automate - GitLab merge requests</a><li><a href="/posts/just-migrated-my-blog/">Just Migrated my Blog</a><li><a href="/posts/mongodb-optimization-part-1/">MongoDB Optimization Part 1</a><li><a href="/posts/how-not-to-center-a-div/">How not to center a div</a></ul></div><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/mongo/">mongo</a> <a class="post-tag" href="/tags/mongodb-optimization/">mongodb-optimization</a> <a class="post-tag" href="/tags/mongodb/">mongodb</a> <a class="post-tag" href="/tags/nosql/">nosql</a> <a class="post-tag" href="/tags/optimization/">optimization</a> <a class="post-tag" href="/tags/series-1/">series-1</a> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/bash/">bash</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/centering/">centering</a></div></div></div></div></div><div class="row"><div id="tail-wrapper" class="col-12 col-lg-11 col-xl-9 pl-3 pr-3 pr-xl-4 mt-5"><div id="related-posts" class="mb-2 mb-sm-4"><h3 class="pt-2 mb-4 ml-1" data-toc-skip>Further Reading</h3><div class="card-deck mb-4"><div class="card"> <a href="/posts/mongodb-optimization-part-2/"><div class="card-body"> <em class="small" data-ts="1666421640" data-df="ll" > Oct 22, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MongoDB Optimization Part 2</h3><div class="text-muted small"><p> On the last … In the previous post, we looked at how we can benchmark our queries to get an idea of how fast they are. We also looked at how we can get the execution plan of our queries. In this p...</p></div></div></a></div><div class="card"> <a href="/posts/how-not-to-center-a-div/"><div class="card-body"> <em class="small" data-ts="1664755200" data-df="ll" > Oct 3, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>How not to center a div</h3><div class="text-muted small"><p> How not to center a div Ever struggled to center a div? Ever googled “how to center a div”? You probably have seen a lot of different ways to center a div. I even googled “how to center a div” and...</p></div></div></a></div><div class="card"> <a href="/posts/mongodb-optimization-part-1/"><div class="card-body"> <em class="small" data-ts="1664088840" data-df="ll" > Sep 25, 2022 </em><h3 class="pt-0 mt-1 mb-3" data-toc-skip>MongoDB Optimization Part 1</h3><div class="text-muted small"><p> As many before me, I was introduced to database systems in university, with a relational DBMS. I learned about normalization, transactions, ACID … the list goes on. So when I first heard of this my...</p></div></div></a></div></div></div><div class="post-navigation d-flex justify-content-between"> <a href="//posts/mongodb-optimization-part-2/" class="btn btn-outline-primary" prompt="Older"><p>MongoDB Optimization Part 2</p></a><div class="btn btn-outline-primary disabled" prompt="Newer"><p>-</p></div></div><script src="https://utteranc.es/client.js" repo="0xecho/blog-comments" issue-term="pathname" crossorigin="anonymous" async> </script> <script type="text/javascript"> $(function() { const origin = "https://utteranc.es"; const iframe = "iframe.utterances-frame"; const lightTheme = "github-light"; const darkTheme = "github-dark"; let initTheme = lightTheme; if ($("html[data-mode=dark]").length > 0 || ($("html[data-mode]").length == 0 && window.matchMedia("(prefers-color-scheme: dark)").matches)) { initTheme = darkTheme; } addEventListener("message", (event) => { let theme; /* credit to <https://github.com/utterance/utterances/issues/170#issuecomment-594036347> */ if (event.origin === origin) { /* page initial */ theme = initTheme; } else if (event.source === window && event.data && event.data.direction === ModeToggle.ID) { /* global theme mode changed */ const mode = event.data.message; theme = (mode === ModeToggle.DARK_MODE ? darkTheme : lightTheme); } else { return; } const message = { type: "set-theme", theme: theme }; const utterances = document.querySelector(iframe).contentWindow; utterances.postMessage(message, origin); }); }); </script></div></div></div><div id="search-result-wrapper" class="d-flex justify-content-center unloaded"><div class="col-12 col-sm-11 post-content"><div id="search-hints"><div id="access-tags"><div class="panel-heading">Trending Tags</div><div class="d-flex flex-wrap mt-3 mb-1 mr-3"> <a class="post-tag" href="/tags/mongo/">mongo</a> <a class="post-tag" href="/tags/mongodb-optimization/">mongodb-optimization</a> <a class="post-tag" href="/tags/mongodb/">mongodb</a> <a class="post-tag" href="/tags/nosql/">nosql</a> <a class="post-tag" href="/tags/optimization/">optimization</a> <a class="post-tag" href="/tags/series-1/">series-1</a> <a class="post-tag" href="/tags/automation/">automation</a> <a class="post-tag" href="/tags/bash/">bash</a> <a class="post-tag" href="/tags/blog/">blog</a> <a class="post-tag" href="/tags/centering/">centering</a></div></div></div><div id="search-results" class="d-flex flex-wrap justify-content-center text-muted mt-3"></div></div></div></div><footer><div class="container pl-lg-4 pr-lg-4"><div class="d-flex justify-content-between align-items-center text-muted ml-md-3 mr-md-3"><div class="footer-left"><p class="mb-0"> © 2024 <a href="https://linkedin.com/in/elijahma">Elias Amha</a>. <span data-toggle="tooltip" data-placement="top" title="Except where otherwise noted, the blog posts on this site are licensed under the Creative Commons Attribution 4.0 International (CC BY 4.0) License by the author.">Some rights reserved.</span></p></div><div class="footer-right"><p class="mb-0">Powered by <a href="https://jekyllrb.com" target="_blank" rel="noopener">Jekyll</a> with <a href="https://github.com/cotes2020/jekyll-theme-chirpy" target="_blank" rel="noopener">Chirpy</a> theme.</p></div></div></div></footer><div id="mask"></div><a id="back-to-top" href="#" aria-label="back-to-top" class="btn btn-lg btn-box-shadow" role="button"> <i class="fas fa-angle-up"></i> </a><div id="notification" class="toast" role="alert" aria-live="assertive" aria-atomic="true" data-animation="true" data-autohide="false"><div class="toast-header"> <button type="button" class="ml-2 ml-auto close" data-dismiss="toast" aria-label="Close"> <span aria-hidden="true">&times;</span> </button></div><div class="toast-body text-center pt-0"><p class="pl-2 pr-2 mb-3">A new version of content is available.</p><button type="button" class="btn btn-primary" aria-label="Update"> Update </button></div></div><script src="https://cdn.jsdelivr.net/npm/simple-jekyll-search@1.10.0/dest/simple-jekyll-search.min.js"></script> <script> SimpleJekyllSearch({ searchInput: document.getElementById('search-input'), resultsContainer: document.getElementById('search-results'), json: '/assets/js/data/search.json', searchResultTemplate: '<div class="pl-1 pr-1 pl-sm-2 pr-sm-2 pl-lg-4 pr-lg-4 pl-xl-0 pr-xl-0"> <a href="{url}">{title}</a><div class="post-meta d-flex flex-column flex-sm-row text-muted mt-1 mb-1"> {categories} {tags}</div><p>{snippet}</p></div>', noResultsText: '<p class="mt-5">Oops! No results found.</p>', templateMiddleware: function(prop, value, template) { if (prop === 'categories') { if (value === '') { return `${value}`; } else { return `<div class="mr-sm-4"><i class="far fa-folder fa-fw"></i>${value}</div>`; } } if (prop === 'tags') { if (value === '') { return `${value}`; } else { return `<div><i class="fa fa-tag fa-fw"></i>${value}</div>`; } } } }); </script> <script src="https://cdn.jsdelivr.net/combine/npm/magnific-popup@1/dist/jquery.magnific-popup.min.js,npm/lazysizes@5.3.2/lazysizes.min.js,npm/clipboard@2/dist/clipboard.min.js"></script> <script src="https://cdn.jsdelivr.net/combine/npm/dayjs@1/dayjs.min.js,npm/dayjs@1/locale/en.min.js,npm/dayjs@1/plugin/relativeTime.min.js,npm/dayjs@1/plugin/localizedFormat.min.js"></script> <script defer src="/assets/js/dist/post.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/bootstrap@4/dist/js/bootstrap.bundle.min.js"></script> <script defer src="/app.js"></script> <script defer src="https://www.googletagmanager.com/gtag/js?id=G-5V4XHL1MJ1"></script> <script> document.addEventListener("DOMContentLoaded", function(event) { window.dataLayer = window.dataLayer || []; function gtag(){dataLayer.push(arguments);} gtag('js', new Date()); gtag('config', 'G-5V4XHL1MJ1'); }); </script>
